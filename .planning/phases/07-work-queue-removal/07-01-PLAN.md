---
phase: 07-work-queue-removal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/opencode.ts
  - src/hooks/useExternalEditor.ts
autonomous: true
must_haves:
  truths:
    - "No executeQueuedCommand function exists in codebase"
    - "No 'workqueue' reference exists in EditContext type"
    - "No workqueue-related imports remain"
  artifacts:
    - path: "src/lib/opencode.ts"
      provides: "OpenCode SDK integration"
      must_not_contain: "executeQueuedCommand"
    - path: "src/hooks/useExternalEditor.ts"
      provides: "External editor integration"
      must_not_contain: "'workqueue'"
  key_links:
    - from: "src/lib/opencode.ts"
      to: "src/hooks/useExternalEditor.ts"
      via: "Both files cleaned of workqueue remnants"
      pattern: "no workqueue references"
---

<objective>
Remove dead code remnants from work queue feature removal

Purpose: Clean up remaining workqueue-related code that was not removed in manual removal (commit 624ee7b). These are dead code/unused references that should be removed for code hygiene.

Output: Clean codebase with no workqueue remnants
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Work queue removal history
The work queue feature was manually removed in commit 624ee7b, but two remnants remain:

1. `executeQueuedCommand` function in src/lib/opencode.ts (lines 300-321) - defined but never imported/used
2. `'workqueue'` in EditContext type union in src/hooks/useExternalEditor.ts (line 15) - dead reference since WorkQueue tab no longer exists

Both should be removed as they serve no purpose.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove executeQueuedCommand function</name>
  <files>src/lib/opencode.ts</files>
  <action>
  Remove the executeQueuedCommand function (lines 300-321) and its associated comment block (lines 300-303).

  The function exports:
  - executeQueuedCommand() - unused, no imports found in codebase

  Delete both the comment block and the function entirely.
  </action>
  <verify>
  grep -r "executeQueuedCommand" src/ returns no matches
  </verify>
  <done>
  No executeQueuedCommand function or references exist in codebase
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove 'workqueue' from EditContext type</name>
  <files>src/hooks/useExternalEditor.ts</files>
  <action>
  Update the EditContext interface (line 14-19) to remove 'workqueue' from the activeTab type union.

  Current type:
  ```typescript
  activeTab: 'roadmap' | 'phase' | 'todos' | 'background' | 'workqueue';
  ```

  Change to:
  ```typescript
  activeTab: 'roadmap' | 'phase' | 'todos' | 'background';
  ```

  No other changes needed - the 'workqueue' case in getEditableFiles() was already removed in the manual removal.
  </action>
  <verify>
  grep -r "'workqueue'" src/ returns no matches (in context of EditContext/tab references)
  </verify>
  <done>
  EditContext type only includes the 4 active tabs: roadmap, phase, todos, background
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify cleanup with typecheck and lint</name>
  <files></files>
  <action>
  Run typecheck and lint to ensure removal didn't break anything:

  1. bun run typecheck - should pass with no errors
  2. bun run lint - should pass with no errors

  If any errors occur, investigate and fix.
  </action>
  <verify>
  bun run typecheck passes with no errors
  bun run lint passes with no errors
  </verify>
  <done>
  Codebase passes typecheck and lint with no workqueue remnants
  </done>
</task>

</tasks>

<verification>
- No executeQueuedCommand references in codebase (grep search)
- No 'workqueue' tab references in EditContext type
- Typecheck passes with no errors
- Lint passes with no errors
</verification>

<success_criteria>
Dead code remnants removed:
- executeQueuedCommand function deleted from opencode.ts
- 'workqueue' removed from EditContext type union
- Codebase compiles and lints cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/07-work-queue-removal/07-01-SUMMARY.md`
</output>
