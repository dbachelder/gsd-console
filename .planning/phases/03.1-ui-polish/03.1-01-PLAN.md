---
phase: 03.1-ui-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app.tsx
  - src/components/layout/Header.tsx
  - src/components/layout/TabLayout.tsx
autonomous: true

must_haves:
  truths:
    - "Footer is anchored to bottom of content area (not floating)"
    - "Footer stays at bottom regardless of content length (short or long)"
    - "Tab bar shows active tab with underline styling"
    - "Inactive tabs use dimColor for visual hierarchy"
    - "Header has consistent size and doesn't change based on main content"
  artifacts:
    - path: "src/app.tsx"
      provides: "Main layout with sticky footer via Flexbox"
      contains: "flexGrow={1}"
    - path: "src/components/layout/TabLayout.tsx"
      provides: "Enhanced TabBar with underline styling"
      exports: ["TabBar"]
    - path: "src/components/layout/Header.tsx"
      provides: "Header with consistent sizing"
      exports: ["Header"]
  key_links:
    - from: "src/app.tsx"
      to: "src/components/layout/TabLayout.tsx"
      via: "TabLayout rendering"
      pattern: "flexGrow.*TabLayout"
    - from: "src/app.tsx"
      to: "src/components/layout/Header.tsx"
      via: "Header rendering with fixed layout"
      pattern: "<Header"
    - from: "src/components/layout/TabLayout.tsx"
      to: "src/components/layout/TabBar"
      via: "TabBar component rendering"
      pattern: "underline.*activeTab"
---

<objective>
Implement sticky footer positioning and enhance tab styling with visual hierarchy improvements.

Purpose: Footer should anchor to bottom of content area (not fixed to viewport), and tab bar should show active tab clearly with underline styling while dimming inactive tabs. Existing help bar toggle behavior (via '?' key) is preserved.
Output: Updated app.tsx with sticky footer Flexbox layout and enhanced TabBar component in TabLayout.tsx
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03.1-ui-polish/03.1-CONTEXT.md
@.planning/phases/03.1-ui-polish/03.1-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement sticky footer positioning</name>
  <files>src/app.tsx</files>
  <action>
Restructure app.tsx layout to use Flexbox sticky footer pattern:

1. Wrap TabLayout content area in a Box with `flexGrow={1}` to fill available space
2. Render Footer after the content area (no flexGrow on Footer - it stays at bottom)
3. Ensure outer Box has `flexGrow={1}` (already present) to span viewport

Pattern:
```tsx
<Box flexDirection="column" flexGrow={1}>
  <Header ... />
  <Box flexDirection="column" flexGrow={1}>  {/* Content area fills space */}
    <TabLayout ... />
  </Box>
  <Footer ... />  {/* Stays at bottom - no flexGrow */}
</Box>
```

DO NOT use fixed positioning or absolute coordinates (RESEARCH.md don't-hand-roll rule).
DO use Ink's Flexbox `flexGrow` pattern (RESEARCH.md sticky footer pattern).
</action>
  <verify>
  Run `bun run dev` and verify:
  - Footer appears at bottom of terminal
  - When content is short, footer still stays at bottom (not floating in middle)
  - When content is long, footer remains at bottom below scrollable content
  </verify>
  <done>Footer anchored to bottom of content area using Flexbox flexGrow pattern</done>
</task>

<task type="auto">
  <name>Task 2: Enhance tab styling with underline and dimming</name>
  <files>src/components/layout/TabLayout.tsx</files>
  <action>
Update TabBar component in TabLayout.tsx to improve visual hierarchy:

1. Active tab: Add `underline` Text property (clean terminal aesthetic per RESEARCH.md recommendation)
2. Inactive tabs: Use `dimColor` Text property for subtle visual distinction
3. Relaxed spacing: Add explicit spacing between tabs using paddingX on parent Box

Changes to TabBar component:
```tsx
function TabBar({ activeTab }: TabBarProps) {
  const tabs: { id: TabId; label: string; key: string }[] = [
    { id: 'roadmap', label: 'Roadmap', key: '1' },
    { id: 'phase', label: 'Phase', key: '2' },
    { id: 'todos', label: 'Todos', key: '3' },
  ];

  return (
    <Box marginBottom={1} paddingX={2}>  {/* Relaxed spacing */}
      {tabs.map((tab) => (
        <Box key={tab.id}>
          {tab.id !== 'roadmap' && <Text dimColor>  </Text>}  {/* Spacer */}
          <Text
            underline={activeTab === tab.id}  {/* Underline for active */}
            bold={activeTab === tab.id}
            dimColor={activeTab !== tab.id}  {/* Dim inactive tabs */}
          >
            [{tab.key}] {tab.label}
          </Text>
        </Box>
      ))}
    </Box>
  );
}
```

DO NOT use pill/segmented style unless requested (underline is default per RESEARCH.md).
DO remove `backgroundColor` and `color` props (simplify to underline + dimColor).
</action>
  <verify>
  Run `bun run dev` and verify:
  - Active tab has underline
  - Inactive tabs are dimmed (less visible than active)
  - Spacing between tabs is relaxed (not cramped)
  - Visual hierarchy is clear (active tab stands out)
</verify>
  <done>Active tab shows underline styling, inactive tabs use dimColor with relaxed spacing</done>
</task>

<task type="auto">
  <name>Task 3: Verify and fix header sizing consistency</name>
  <files>src/app.tsx, src/components/layout/Header.tsx</files>
  <action>
Verify header has consistent size and doesn't change based on main content area:

1. Inspect app.tsx layout - Header should be outside the sticky footer content area
2. Inspect Header.tsx - verify it has fixed dimensions (border, padding, 2 rows)
3. Verify Header is rendered BEFORE TabLayout content area (not inside flexGrow container)
4. Ensure Header's margin/padding doesn't depend on content state

Current app.tsx layout pattern:
```tsx
<Box flexDirection="column" flexGrow={1}>
  <Header ... />  {/* Fixed size - no flexGrow */}
  <TabLayout ... />  {/* Fills space - has flexGrow */}
  <Footer ... />  {/* Fixed size - no flexGrow */}
</Box>
```

If header size changes based on content (e.g., dynamic margin, conditional rendering):
- Fix by ensuring Header has constant structure (always 2 rows: title + progress)
- Remove any dynamic margin/padding that depends on content state
- Ensure Header is rendered outside TabLayout (not wrapped by its flexGrow container)

If header sizing is already consistent:
- No changes needed - verify via manual testing
- Document finding in task completion note
</action>
  <verify>
  Run `bun run dev` and verify:
  1. Navigate between different tabs (roadmap, phase, todos)
  2. Expand/collapse phases
  3. Verify header size stays constant throughout
  4. Check that header doesn't shift or resize based on content length
  5. Verify header maintains consistent vertical position
  6. Confirm header occupies exactly 3 terminal rows (2 rows content + 1 bottom border)
  </verify>
  <done>Header has consistent size regardless of main content (verified via testing)</done>
</task>

</tasks>

<verification>
Run TUI and verify:
1. Footer remains at bottom of content area (not floating in middle)
2. Footer positioning works with both short and long content
3. Active tab has underline styling
4. Inactive tabs are dimmed for visual hierarchy
5. Spacing between tabs is clean and relaxed
</verification>

<success_criteria>
- Footer anchored to bottom of content area via Flexbox flexGrow pattern
- Tab bar shows active tab with underline styling
- Inactive tabs use dimColor for visual distinction
- Layout works correctly across different content lengths
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-ui-polish/03.1-01-SUMMARY.md`
</output>
