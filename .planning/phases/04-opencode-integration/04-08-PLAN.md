---
phase: 04-opencode-integration
plan: 08
type: execute
wave: 1
depends_on: []
files_modified: [src/components/layout/Footer.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "User can see persistent session connection status in footer"
    - "Footer shows '● Running: [activity]' when session is active"
    - "Footer shows '○ [session-id] (idle)' when session is connected but idle"
  artifacts:
    - path: "src/components/layout/Footer.tsx"
      provides: "Persistent session status display in footer"
      contains: "useSessionActivity"
  key_links:
    - from: "src/components/layout/Footer.tsx"
      to: "src/hooks/useSessionActivity.ts"
      via: "useSessionActivity() hook call"
      pattern: "useSessionActivity"
---

<objective>
Integrate useSessionActivity hook into Footer component to display persistent session connection status

Purpose: Users currently see a brief toast notification when connecting to sessions, but after it disappears there's no visual indicator showing whether they're connected or which session they're connected to.
Output: Footer component that shows real-time session activity status
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04-opencode-integration/04-UAT.md
@.planning/phases/04-opencode-integration/04-01-SUMMARY.md
@src/components/layout/Footer.tsx
@src/components/layout/Footer.session-activity.example.tsx
@src/hooks/useSessionActivity.ts
</context>

<tasks>

<task type="auto">
  <name>Integrate useSessionActivity into Footer</name>
  <files>src/components/layout/Footer.tsx</files>
  <action>
Import useSessionActivity hook and use it in Footer component:
1. Add import: `import { useSessionActivity } from '../hooks/useSessionActivity.ts';`
2. Call hook at top of Footer component: `const activity = useSessionActivity();`
3. Add session status display before keybinding hints:
   - If activity exists and isActive with currentActivity: show `<Text color="cyan" bold>● {activity.currentActivity} | </Text>`
   - If activity exists but not active: show `<Text dimColor>○ {activity.title?.slice(0, 8)}... | </Text>`
   - If no activity (no OpenCode server): show nothing (don't break existing footer)

Follow the pattern in Footer.session-activity.example.tsx (lines 31-35).

Important: Don't change existing keybinding hints - just prepend session status.
</action>
  <verify>Run `bun run dev`, press 'c' to connect to session, observe footer shows session status indicator</verify>
  <done>Footer displays persistent session connection status (cyan dot when active, gray dot when idle)</done>
</task>

</tasks>

<verification>
1. Verify TypeScript compiles: `bun run typecheck`
2. Verify linter passes: `bun run lint`
3. Manual test: Run TUI, connect to session, confirm footer shows session status indicator
</verification>

<success_criteria>
- Footer shows '● Running: [activity]' when OpenCode session is actively executing
- Footer shows '○ [session-id] (idle)' when session is connected but idle
- Footer works normally when no OpenCode server is running (no errors)
</success_criteria>

<output>
After completion, create `.planning/phases/04-opencode-integration/04-08-SUMMARY.md`
</output>
